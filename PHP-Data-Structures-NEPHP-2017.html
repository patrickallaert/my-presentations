<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta property="og:locale" content="en_US">
        <meta property="og:type" content="article" />
        <meta property="og:title" content="PHP Data Structures" />
        <meta property="og:url" content="http://users.telenet.be/patrick_allaert/PHP-Data-Structures-NEPHP-2017.html" />
        <meta property="og:description" content="Presentation of 'PHP Data Structures' by Patrick Allaert at NortheastPHP 2017 (Charlottetown, Canada)." />
        <meta property="og:site_name" content="Patrick Allaert" />
        <meta property="og:image" content="https://catchy.io/slides/img/data-structures/presentation_thumbnail.jpg" />
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:image:src" content="https://catchy.io/slides/img/data-structures/presentation_thumbnail.jpg">
        <meta name="twitter:title" content="Patrick Allaert slides - PHP Data Structures">
        <meta name="twitter:description" content="Presentation of 'PHP Data Structures' by Patrick Allaert at NortheastPHP 2017 (Charlottetown, Canada).">
        <meta name="twitter:creator" content="@patrick_allaert">
        <meta name="twitter:site" content="@patrick_allaert">

        <title>PHP Data Structures - NortheastPHP 2017 (Charlottetown, Canada)</title>

        <meta name="description" content="Presentation of 'PHP Data Structures' by Patrick Allaert at NortheastPHP 2017 (Charlottetown, Canada).">
        <meta name="author" content="Patrick Allaert">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">


        <link rel="stylesheet" href="css/my.css">
        <link rel="stylesheet" href="css/theme/league.css" id="theme">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );

            var allCharts = [];
        </script>

        <script>
            if (window.location.protocol != "file:") {
                (function (i, s, o, g, r, a, m) {
                    i['GoogleAnalyticsObject'] = r;
                    i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
                    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
                    a.async = 1;
                    a.src = g;
                    m.parentNode.insertBefore(a, m)
                })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                ga('create', 'UA-49964131-4', 'auto');
                ga('send', 'pageview');
            }
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

        <script src="js/highcharts/adapters/standalone-framework.js"></script>
        <script src="js/highcharts/highcharts.js"></script>
        <script src="js/highcharts/modules/exporting.js"></script>
    </head>

    <body class="php data structures nephp" itemscope itemtype="http://schema.org/TechArticle">
        <meta itemprop="datePublished" content="2015-11-11"/>
        <meta itemprop="headline" content="Presentation of 'PHP Data Structures' by Patrick Allaert at NortheastPHP 2017 (Charlottetown, Canada)."/>
        <meta itemprop="image" content="https://catchy.io/slides/img/data-structures/presentation_thumbnail.jpg" />
        <meta itemprop="thumbnailUrl" content="https://catchy.io/slides/img/data-structures/presentation_thumbnail.jpg" />
        <div itemprop="publication" itemscope itemtype="http://schema.org/PublicationEvent">
            <meta itemprop="name" content="PHP Data Structures"/>
            <meta itemprop="startDate" content="2015-11-23T15:00:00+01:00"/>
            <meta itemprop="endDate" content="2015-11-23T15:30:00+01:00"/>
            <meta itemprop="url" content="http://event.afup.org/forum-php-2015/programme/#1583"/>
            <meta itemprop="duration" content="PT30M"/>
            <meta itemprop="inLanguage" content="en"/>
            <div itemprop="superEvent" itemscope itemtype="http://schema.org/EducationEvent">
                <meta itemprop="name" content="NortheastPHP 2017"/>
                <meta itemprop="startDate" content="2015-11-23"/>
                <meta itemprop="endDate" content="2015-11-24"/>
                <div itemprop="location" itemscope itemtype="http://schema.org/Place">
                    <meta itemprop="name" content="Le Beffroi de Montrouge"/>
                    <div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
                        <meta itemprop="name" content="Le Beffroi de Montrouge"/>
                        <meta itemprop="streetAddress" content="2 Place Emile Cresp, 92120 Montrouge"/>
                        <meta itemprop="addressLocality" content="Montrouge, Charlottetown, Canada"/>
                        <meta itemprop="postalCode" content="F-92120"/>
                        <meta itemprop="addressCountry" content="Charlottetown, Canada"/>
                    </div>
                </div>
                <div itemprop="organizer" itemscope itemtype="http://schema.org/Organization">
                    <meta itemprop="name" content="Association Française des utilisateurs de PHP"/>
                    <meta itemprop="url" content="http://www.afup.org/"/>
                </div>
            </div>
        </div>
        <div class="reveal">
            <div class="slides">
                <section class="first">
                    <h1 itemprop="name">PHP Data Structures</h1>
                </section>

                <section itemprop="author" itemscope itemtype="http://schema.org/Person">
                    <meta itemprop="email" content="patrickallaert@php.net"/>
                    <meta itemprop="image" content="https://pbs.twimg.com/profile_images/344513261567775460/348b5193864dc076fac43a9141e36ceb.jpeg"/>
                    <h2>Hello, I'm <span itemprop="givenName">Patrick</span> <span itemprop="familyName">Allaert</span></h2>
                    <p><a href="https://twitter.com/patrick_allaert/">@patrick_allaert</a> / <a href="mailto:patrickallaert@php.net">patrickallaert@php.net</a> </p>
                    <ul class="fragment">
                        <li>Dealing with PHP/Linux for +15 years</li>
                        <li>Author of the PECL extension: <a href="https://pecl.php.net/package/APM">APM for PHP</a></li>
                        <li>PHP internals enthusiast, RFC voter</li>
                    </ul>
                </section>

                <section>
                    <h2>PHP native datatypes</h2>
                    <ul>
                        <li>NULL</li>
                        <li>Booleans</li>
                        <li>Integers</li>
                        <li>Floating point numbers</li>
                        <li>Strings</li>
                        <li>Arrays</li>
                        <li>Objects</li>
                        <li>Resources</li>
                    </ul>
                </section>

                <section class="wikipedia datatypes">
                    <div>
                        <ul>
                            <li>2-3-4 tree</li>
                            <li>2-3 heap</li>
                            <li>2-3 tree</li>
                            <li>AA tree</li>
                            <li>Abstract syntax tree</li>
                            <li>(a,b)-tree</li>
                            <li>Adaptive k-d tree</li>
                            <li>Adjacency list</li>
                            <li>Adjacency matrix</li>
                            <li>AF-heap</li>
                            <li>Alternating decision tree</li>
                            <li>And-inverter graph</li>
                            <li>And–or tree</li>
                            <li class="fragment grow" data-fragment-index="0">Array</li>
                            <li>AVL tree</li>
                            <li>Beap</li>
                            <li>Bidirectional map</li>
                            <li>Bin</li>
                            <li>Binary decision diagram</li>
                            <li>Binary heap</li>
                            <li>Binary search tree</li>
                            <li>Binary tree</li>
                            <li>Binomial heap</li>
                            <li><span class="fragment grow" data-fragment-index="0">Bit array</span> / Bitset / Bitmap</li>
                            <li>Bitboard</li>
                            <li>Bit field</li>
                        </ul>
                    </div>
                    <div>
                        <ul>
                            <li>BK-tree</li>
                            <li>Bloom filter</li>
                            <li>Boolean</li>
                            <li>Bounding interval hierarchy</li>
                            <li>B sharp tree</li>
                            <li>BSP tree</li>
                            <li>B-tree</li>
                            <li>B*-tree</li>
                            <li>B+ tree</li>
                            <li>B-trie</li>
                            <li>Bx-tree</li>
                            <li>Cartesian tree</li>
                            <li>Char</li>
                            <li>Circular buffer</li>
                            <li>Compressed suffix array</li>
                            <li>Container</li>
                            <li>Control table</li>
                            <li>Cover tree</li>
                            <li>Ctrie</li>
                            <li>Dancing tree</li>
                            <li>D-ary heap</li>
                            <li>Decision tree</li>
                            <li>Deque</li>
                            <li>Directed acyclic graph</li>
                        </ul>
                    </div>
                    <div>
                        <ul>
                            <li>Directed graph</li>
                            <li>Disjoint-set</li>
                            <li>Distributed hash table</li>
                            <li>Double</li>
                            <li>Doubly connected edge list</li>
                            <li>Doubly linked list</li>
                            <li>Dynamic array</li>
                            <li>Enfilade</li>
                            <li>Enumerated type</li>
                            <li>Expectiminimax tree</li>
                            <li>Exponential tree</li>
                            <li>Fenwick tree</li>
                            <li>Fibonacci heap</li>
                            <li>Finger tree</li>
                            <li>Float</li>
                            <li>FM-index</li>
                            <li>Fusion tree</li>
                            <li>Gap buffer</li>
                            <li>Generalised suffix tree</li>
                            <li>Graph</li>
                            <li>Graph-structured stack</li>
                            <li>Hash</li>
                            <li>Hash array mapped trie</li>
                            <li>Hashed array tree</li>
                            <li>Hash list</li>
                        </ul>
                    </div>
                    <div>
                        <ul>
                            <li>Heightmap</li>
                            <li>Hilbert R-tree</li>
                            <li>Hypergraph</li>
                            <li>Iliffe vector</li>
                            <li>Image</li>
                            <li>Implicit kd-tree</li>
                            <li>Interval tree</li>
                            <li>Int</li>
                            <li>Judy array</li>
                            <li>Kdb tree</li>
                            <li>Kd-tree</li>
                            <li>Koorde</li>
                            <li>Leftist heap</li>
                            <li>Lightmap</li>
                            <li>Linear octree</li>
                            <li>Link/cut tree</li>
                            <li>Linked list</li>
                            <li>Lookup table</li>
                            <li><span class="fragment grow" data-fragment-index="0">Map</span> / Associative array / Dictionary</li>
                            <li>Matrix</li>
                            <li>Metric tree</li>
                            <li>Minimax tree</li>
                            <li>Min/max kd-tree</li>
                            <li>M-tree</li>
                        </ul>
                    </div>
                    <div>
                        <ul>
                            <li>Multigraph</li>
                            <li>Multimap</li>
                            <li>Multiset</li>
                            <li>Octree</li>
                            <li>Pagoda</li>
                            <li>Pairing heap</li>
                            <li>Parallel array</li>
                            <li>Parse tree</li>
                            <li>Plain old data structure</li>
                            <li>Prefix hash tree</li>
                            <li>Priority queue</li>
                            <li>Propositional directed acyclic graph</li>
                            <li>Quad-edge</li>
                            <li>Quadtree</li>
                            <li>Queap</li>
                            <li class="fragment grow" data-fragment-index="0">Queue</li>
                            <li>Radix tree</li>
                            <li>Randomized binary search tree</li>
                            <li>Range tree</li>
                            <li>Rapidly-exploring random tree</li>
                            <li>Record (also called tuple or struct)</li>
                            <li>Red-black tree</li>
                            <li>Rope</li>
                        </ul>
                    </div>
                    <div>
                        <ul>
                            <li>Routing table</li>
                            <li>R-tree</li>
                            <li>R* tree</li>
                            <li>R+ tree</li>
                            <li>Scapegoat tree</li>
                            <li>Scene graph</li>
                            <li>Segment tree</li>
                            <li>Self-balancing binary search tree</li>
                            <li>Self-organizing list</li>
                            <li class="fragment grow" data-fragment-index="0">Set</li>
                            <li>Skew heap</li>
                            <li>Skip list</li>
                            <li>Soft heap</li>
                            <li>Sorted array</li>
                            <li>Spaghetti stack</li>
                            <li>Sparse array</li>
                            <li>Sparse matrix</li>
                            <li>Splay tree</li>
                            <li>SPQR-tree</li>
                            <li class="fragment grow" data-fragment-index="0">Stack</li>
                            <li>String</li>
                            <li class="fragment grow" data-fragment-index="0">Struct</li>
                            <li>Suffix array</li>
                            <li>Suffix tree</li>
                            <li>Symbol table</li>
                            <li>Syntax tree</li>
                            <li>Tagged union (variant record, discriminated union, disjoint union)</li>
                        </ul>
                    </div>
                    <div>
                        <ul>
                            <li>Tango tree</li>
                            <li>Ternary heap</li>
                            <li>Ternary search tree</li>
                            <li>Threaded binary tree</li>
                            <li>Top tree</li>
                            <li>Treap</li>
                            <li>Tree</li>
                            <li>Trees</li>
                            <li>Trie</li>
                            <li>T-tree</li>
                            <li>UB-tree</li>
                            <li>Union</li>
                            <li>Unrolled linked list</li>
                            <li>Van Emde Boas tree</li>
                            <li>Variable-length array</li>
                            <li>VList</li>
                            <li>VP-tree</li>
                            <li>Weight-balanced tree</li>
                            <li>Winged edge</li>
                            <li>X-fast trie</li>
                            <li>Xor linked list</li>
                            <li>X-tree</li>
                            <li>Y-fast trie</li>
                            <li>Zero suppressed decision diagram</li>
                            <li>Zipper</li>
                            <li>Z-order</li>
                        </ul>
                    </div>
                </section>

                <section class="php untruthfulness">
                    <h2>Array: PHP's untruthfulness</h2>
                    <section>
                        <p>PHP “Arrays” are everything but simple arrays!</span></p>
                        <div class="fragment">
                            <p>The simpler form of an array is a fixed size structure and looks like:</p>
                            <img src="img/data-structures/true_array.png" alt="True array data structure" style="width: 60%;" />
                        </div>
                    </section>

                    <section>
                        <p>PHP “Arrays”</p>
                        <ul>
                            <li class="fragment" data-fragment-index="0">
                                are dynamic:

                                <pre><code class="php">$array[] = 42;
unset($array[1]);
array_shift($array);</code></pre>
                            </li>
                            <li class="fragment" data-fragment-index="1">
                                can be iterated one way:

                                <pre><code class="php">foreach ($array as $elem) {}
next($array);</code></pre>
                            </li>
                            <li class="fragment" data-fragment-index="2">
                                or another!

                                <pre><code class="php">prev($array);</code></pre>
                            </li>
                        </ul>

                        <p class="fragment">always with a constant cost!</p>
                    </section>

                    <section>
                        <p>To achieve this, the underlying implementation of PHP “Arrays” makes use of a <a href="https://en.wikipedia.org/wiki/Doubly_linked_list">Doubly Linked List</a>:</p>
                        <img class="fragment" alt="Linked list" src="img/data-structures/linked_list.png" />
                    </section>

                    <section>
                        <p>PHP “Arrays” can also</p>
                        <ul>
                            <li class="fragment" data-fragment-index="0">
                                be accessed with string keys:

                                <pre><code class="php">$array["forty-two"] = 42;</code></pre>
                            </li>
                            <li class="fragment" data-fragment-index="1">
                                or integer keys:

                                <pre><code class="php">$array[42] = "forty-two";</code></pre>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <p>To achieve this, the underlying implementation additionally makes use of an <a href="https://en.wikipedia.org/wiki/Hash_table">Hash Table</a>:</p>
                        <img class="fragment" style="width: 75%" alt="Linked list combined with hash table" src="img/data-structures/linked_list_and_hash_table.png" />
                    </section>

                    <section>
                        <p>From the manual: <a href="http://php.net/manual/en/language.types.array.php">http://php.net/manual/en/language.types.array.php</a>:</p>
                        <blockquote>“This type is optimized for several different uses; it can be treated as an array, list (vector), hash table (an implementation of a map), dictionary, collection, stack, queue, and probably more.”</blockquote>
                    </section>
                </section>

                <section class="optimized-for-anything">
                    <section data-background-image="img/data-structures/swiss-knife.jpg" data-background-position="center" data-background-size="50%" data-background="#ffffff" data-background-repeat="no-repeat">
                        <h2>Optimized for anything ≈ Optimized for nothing!</h2>
                    </section>

                    <section>
                        <h2>Array: PHP compared to C</h2>
                        <ul>
                            <li>In C: 100 000 integers (using long on 64bits =&gt; 8 bytes) can be stored in 0.76 MiB.</li>
                            <li class="fragment" data-fragment-index="0">In PHP <span class="fragment strike" data-fragment-index="1">5</span> <span class="fragment" data-fragment-index="1">7</span>:
                                <ul>
                                    <li>it will take ≅ <strong class="fragment strike" data-fragment-index="1">13.97 MiB!</strong> <strong class="fragment" data-fragment-index="1">4 MiB!</strong></li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                </section>

                <section class="arrays">
                    <h2>"true" Arrays</h2>
                    <section data-background="img/data-structures/arrays.jpg">
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <p>An array is a fixed size collection where elements are each identified by a numeric index.</p>
                        <img src="img/data-structures/true_array.png" alt="True array data structure" style="width: 60%;" />
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <h3>using <code>array</code></h3>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$array = [];</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre><code>$array[0] = 1;
$array[1] = 2;
$array[2] = 3;</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>$array[0]; // gives 1
$array[1]; // gives 2
$array[2]; // gives 3</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <h3>using <code>SplFixedArray</code></h3>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$array = new SplFixedArray(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$array[0] = 1;
$array[1] = 2;
$array[2] = 3;</code></pre>
                            <pre style="float: right;"><code>$array-&gt;offsetSet(1);
$array-&gt;offsetSet(2);
$array-&gt;offsetSet(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>$array[0]; // gives 1
$array[1]; // gives 2
$array[2]; // gives 3</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <h3>using <code>string</code> (8-bit int: 0 =&gt; 255)</h3>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$array = str_repeat(chr(0), 1024 * 1024);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre><code>$array[0] = chr(1);
$array[1] = chr(2);
$array[2] = chr(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>ord($array[0]); // gives 1
ord($array[1]); // gives 2
ord($array[2]); // gives 3</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <h3>Memory usage</h3>
                        <h4>Using 10<sup>4</sup> arrays of 1000 elements</h4>
                        <div id="arrays-memory" class="chart"></div>

                        <script>
                            allCharts.push(
                                    new Highcharts.Chart({
                                        chart: {
                                            type: 'bar',
                                            renderTo: 'arrays-memory'
                                        },
                                        title: { text: 'Memory usage' },
                                        yAxis: {
                                            title: {
                                                enabled: false
                                            },
                                            labels: {
                                                enabled: false
                                            }
                                        },
                                        xAxis: { categories: ['PHP 5.6', 'PHP 7'] },
                                        plotOptions: {
                                            series: {
                                                dataLabels: {
                                                    enabled: true,
                                                    format: '{point.y} MiB'
                                                }
                                            }
                                        },
                                        legend: { reversed: true },
                                        series: [
                                            {
                                                name: 'string',
                                                data: [11.18, 13.07],
                                                tooltip: { valueSuffix: ' MiB' }
                                            },
                                            {
                                                name: 'SplFixedArray',
                                                data: [539, 159],
                                                tooltip: { valueSuffix: ' MiB' }
                                            },
                                            {
                                                name: 'Array',
                                                data: [1378, 353],
                                                tooltip: { valueSuffix: ' MiB' }
                                            }
                                        ]
                                    })
                            );
                        </script>
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <h3>benchmark creation (speed)</h3>
                        <p>Creation of an array of 1000 elements with value <code>true</code></p>
                        <div id="arrays-creation-speed" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart(
                                    {
                                         chart: {
                                             type: 'bar',
                                             renderTo: 'arrays-creation-speed'
                                         },
                                         title: { text: '# CPU instructions' },
                                         yAxis: {

                                             min: 0,
                                             title: {
                                                 enabled: false
                                             },
                                             labels: {
                                                 enabled: false
                                             }
                                         },
                                         xAxis: { categories: ['PHP 7'] },
                                         plotOptions: {
                                             series: {
                                                 dataLabels: {
                                                     enabled: true,
                                                     format: '{point.y} cpu instructions'
                                                 }
                                             }
                                         },
                                         legend: { reversed: true },
                                         series: [
                                             {
                                                 name: 'string (array of char)',
                                                 data: [698764],
                                                 tooltip: { valueSuffix: ' instr.' }
                                             },
                                             {
                                                 name: 'SplFixedArray',
                                                 data: [685348],
                                                 tooltip: { valueSuffix: ' instr.' }
                                             },
                                             {
                                                 name: 'Array',
                                                 data: [696970],
                                                 tooltip: { valueSuffix: ' instr.' }
                                             }
                                         ]
                                     }
                                 )
                            );
                        </script>
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <h3>benchmark iteration (speed)</h3>
                        <p>Iterating of an array of 1000 elements with value <code>true</code></p>
                        <div id="arrays-iteration-speed" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart(
                                    {
                                        chart: {
                                            type: 'bar',
                                            renderTo: 'arrays-iteration-speed'
                                        },
                                        title: { text: '# CPU instructions' },
                                        yAxis: {

                                            min: 0,
                                            title: {
                                                enabled: false
                                            },
                                            labels: {
                                                enabled: false
                                            }
                                        },
                                        xAxis: { categories: ['PHP 7'] },
                                        plotOptions: {
                                            series: {
                                                dataLabels: {
                                                    enabled: true,
                                                    format: '{point.y} cpu instructions'
                                                }
                                            }
                                        },
                                        legend: { reversed: true },
                                        series: [
                                            {
                                                name: 'string (array of char)',
                                                data: [800820],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'SplFixedArray',
                                                data: [754820],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'Array',
                                                data: [691820],
                                                tooltip: { valueSuffix: ' instr.' }
                                            }
                                        ]
                                    }
                                )
                            );
                        </script>
                    </section>

                    <section data-background="img/data-structures/arrays.jpg">
                        <h3>PHP 7 optimizations</h3>
                        <p>As of PHP 7, "true" arrays benefits from the fact that the underlying <strong>hashtable</strong> structure is <em>packed</em>.</p>
                        <p>For <em>packed</em> hashtables optimization to be used there are 2 conditions to respect:</p>
                        <ol>
                            <li>Keys must be <strong>numeric</strong>.</li>
                            <li>Keys must be inserted in <strong>ascending order</strong>.</li>
                        </ol>

                    </section>
                </section>

                <section class="structs">
                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs (or records, tuples,...)</h2>
                    </section>

                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs (or records, tuples,...)</h2>
                        <ul>
                            <li>A struct is a value containing other values which are typically accessed using a name.</li>
                            <li>Example:
                            <p>Person =&gt; firstName / lastName</p>
                            <p>ComplexNumber =&gt; realPart / imaginaryPart</p></li>
                        </ul>
                    </section>

                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs &mdash; Using array</h2>
                        <pre><code class="php">$person = [
    "firstName" =&gt; "Patrick",
    "lastName" =&gt; "Allaert",
];</code></pre>
                    </section>

                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs &mdash; Using a class</h2>
                        <pre><code class="php">$person = new PersonStruct(
    "Patrick", "Allaert"
);</code></pre>
                    </section>

                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs &mdash; Using a class (implementation)</h2>
                        <pre><code class="php wide">class PersonStruct {
    public $firstName;
    public $lastName;

    public function __construct($firstName, $lastName) {
        $this-&gt;firstName = $firstName;
        $this-&gt;lastName  = $lastName;
    }

    public function __set($key, $value) {
        // a. Do nothing
        // b. trigger_error()
        // c. Throws an exception
    }
}</code></pre>
                    </section>

                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs &mdash; benchmark</h2>
                        <h3>Using 1e6 “person” structs</h3>
                        <div id="structs-memory" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart({
                                    chart: {
                                        type: 'bar',
                                        renderTo: 'structs-memory'
                                    },
                                    title: { text: 'Memory usage' },
                                    yAxis: {
                                        title: {
                                            enabled: false
                                        },
                                        labels: {
                                            enabled: false
                                        }
                                    },
                                    xAxis: { categories: ['PHP 5.6', 'PHP 7'] },
                                    plotOptions: {
                                        series: {
                                            dataLabels: {
                                                enabled: true,
                                                format: '{point.y} MiB'
                                            }
                                        }
                                    },
                                    legend: { reversed: true },
                                    series: [
                                        {
                                            name: 'Object (declared properties)',
                                            data: [377, 151],
                                            tooltip: { valueSuffix: ' MiB' }
                                        },
                                        {
                                            name: 'Object (dynamic properties)',
                                            data: [675, 471],
                                            tooltip: { valueSuffix: ' MiB' }
                                        },
                                        {
                                            name: 'Array',
                                            data: [565, 425],
                                            tooltip: { valueSuffix: ' MiB' }
                                        }
                                    ]
                                })
                            );
                        </script>
                    </section>

                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs &mdash; benchmark creation</h2>
                        <h3>Creating 1e6 “person” structs</h3>
                        <div id="structs-creation-time" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart(
                                    {
                                        chart: {
                                            type: 'bar',
                                            renderTo: 'structs-creation-time'
                                        },
                                        title: { text: 'Speed' },
                                        yAxis: {
                                            min: 0,
                                            title: {
                                                enabled: false
                                            },
                                            labels: {
                                                enabled: false
                                            }
                                        },
                                        xAxis: { categories: ['PHP 7'] },
                                        plotOptions: {
                                            series: {
                                                dataLabels: {
                                                    enabled: true,
                                                    format: '{point.y} cpu instructions'
                                                }
                                            }
                                        },
                                        legend: { reversed: true },
                                        series: [
                                            {
                                                name: 'object (declared properties), thru constructor',
                                                data: [1451738027],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'object (declared properties), direct access',
                                                data: [1230910257],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'object (dynamic properties), direct access',
                                                data: [1728260073],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'array',
                                                data: [1010725654],
                                                tooltip: { valueSuffix: ' instr.' }
                                            }
                                        ]
                                    }
                                )
                            );
                        </script>
                    </section>

                    <section data-background="img/data-structures/structs.png">
                        <h2>Structs &mdash; benchmark property access</h2>
                        <h3>Accessing "lastName" property of 1e6 “person” structs</h3>
                        <div id="structs-access-time" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart(
                                    {
                                        chart: {
                                            type: 'bar',
                                            renderTo: 'structs-access-time'
                                        },
                                        title: { text: 'Speed' },
                                        yAxis: {
                                            min: 0,
                                            title: {
                                                enabled: false
                                            },
                                            labels: {
                                                enabled: false
                                            }
                                        },
                                        xAxis: { categories: ['PHP 7'] },
                                        plotOptions: {
                                            series: {
                                                dataLabels: {
                                                    enabled: true,
                                                    format: '{point.y} cpu instructions'
                                                }
                                            }
                                        },
                                        legend: { reversed: true },
                                        series: [
                                            {
                                                name: 'object (declared properties), thru getter',
                                                data: [1160953568],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'object (dynamic properties)',
                                                data: [759945725],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'object (declared properties)',
                                                data: [724945766],
                                                tooltip: { valueSuffix: ' instr.' }
                                            },
                                            {
                                                name: 'array',
                                                data: [753945659],
                                                tooltip: { valueSuffix: ' instr.' }
                                            }
                                        ]
                                    }
                                )
                            );
                        </script>
                    </section>
                </section>

                <section class="queues">
                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues</h2>
                    </section>

                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues</h2>
                        <ul>
                            <li>A queue is an ordered collection respecting First In, First Out (<abbr title="First In, First Out">FIFO</abbr>) order.</li>
                            <li>Elements are inserted at one end and removed at the other.</li>
                        </ul>
                        <img src="img/data-structures/queue.png" alt="Queue data structure" style="width: 80%;" />
                    </section>

                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues &mdash; Using <code>array</code></h2>
                        <p>You can use the regular PHP array structure...</p>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$queue = [];</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$queue[] = 1;
$queue[] = 2;
$queue[] = 3;</code></pre>
                            <pre style="float: right;"><code>array_push($queue, 1);
array_push($queue, 2);
array_push($queue, 3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>array_shift($queue); // gives 1
array_shift($queue); // gives 2
array_shift($queue); // gives 3</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues &mdash; Using <code>array</code></h2>
                        <div>
                            <p>Consuming the queue #1:</p>
                            <pre><code>while (!empty($queue)) {
    $element = array_shift($queue);
}</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Consuming the queue #2:</p>
                            <pre><code>foreach ($queue as $index => $element) {
    // do stuff with $element
    unset($queue[$index]);
}</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues &mdash; Using <code>SplQueue</code></h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$queue = new SplQueue();</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$queue[] = 1;
$queue[] = 2;
$queue[] = 3;</code></pre>
                            <pre style="float: right;"><code>$queue-&gt;enqueue(1);
$queue-&gt;enqueue(2);
$queue-&gt;enqueue(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>$queue-&gt;dequeue(); // gives 1
$queue-&gt;dequeue(); // gives 2
$queue-&gt;dequeue(); // gives 3</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues &mdash; Using <code>SplQueue</code></h2>

                        <div>
                            <p>Consuming the queue #1:</p>
                            <pre><code>while (!$queue->isEmpty()) {
    $element = $queue->dequeue();
}</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues &mdash; Using <code>Ds\Queue</code></h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$queue = new Ds\Queue();</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$queue[] = 1;
$queue[] = 2;
$queue[] = 3;</code></pre>
                            <pre style="float: right;"><code>$queue-&gt;push(1);
$queue-&gt;push(2);
$queue-&gt;push(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>$queue-&gt;pop(); // gives 1
$queue-&gt;pop(); // gives 2
$queue-&gt;pop(); // gives 3</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/queues.jpg">
                        <h2>Queues &mdash; Using <code>Ds\Queue</code></h2>
                        <div>
                            <p>Consuming the queue #1:</p>
                            <pre><code>while (!$queue->isEmpty()) {
    $element = $queue->pop();
}</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Consuming the queue #2:</p>
                            <pre><code>foreach ($queue as $element) {
    // do stuff with $element
}</code></pre>
                        </div>
                    </section>
                </section>

                <section class="stacks">
                    <section data-background="img/data-structures/stacks.jpg">
                        <h2>Stacks</h2>
                    </section>

                    <section data-background="img/data-structures/stacks.jpg">
                        <h2>Stacks</h2>
                        <ul>
                            <li>A stack is an ordered collection respecting Last In, First Out (<abbr title="Last In, First Out">LIFO</abbr>) order.</li>
                            <li>Elements are inserted and removed on the same end.</li>
                        </ul>
                        <img src="img/data-structures/stack.png" alt="Stack data structure" style="width: 80%;" />
                    </section>

                    <section data-background="img/data-structures/stacks.jpg">
                        <img src="img/data-structures/stacks_elephpants.jpg" width="45%"/>
                        <p class="credits">Credits: <a href="https://twitter.com/zeevs">@zeevs</a>.</p>
                    </section>

                    <section data-background="img/data-structures/stacks.jpg">
                        <h2>Stacks &mdash; Using <code>array</code></h2>
                        <p>You can use the regular PHP array structure...</p>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$stack = [];</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$stack[] = 1;
$stack[] = 2;
$stack[] = 3;</code></pre>
                            <pre style="float: right;"><code>array_push($stack, 1);
array_push($stack, 2);
array_push($stack, 3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>array_pop($stack); // gives 3
array_pop($stack); // gives 2
array_pop($stack); // gives 1</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/stacks.jpg">
                        <h2>Stacks &mdash; Using <code>SplStack</code></h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$stack = new SplStack();</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$stack[] = 1;
$stack[] = 2;
$stack[] = 3;</code></pre>
                            <pre style="float: right;"><code>$stack-&gt;push(1);
$stack-&gt;push(2);
$stack-&gt;push(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>$stack-&gt;pop(); // gives 3
$stack-&gt;pop(); // gives 2
$stack-&gt;pop(); // gives 1</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/stacks.jpg">
                        <h2>Stacks &mdash; Using <code>Ds\Stack</code></h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$stack = new Ds\Stack();</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$stack[] = 1;
$stack[] = 2;
$stack[] = 3;</code></pre>
                            <pre style="float: right;"><code>$stack-&gt;push(1);
$stack-&gt;push(2);
$stack-&gt;push(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Access them:</p>
                            <pre><code>$stack-&gt;pop(); // gives 3
$stack-&gt;pop(); // gives 2
$stack-&gt;pop(); // gives 1</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/stacks.jpg">
                        <h2>Stacks &mdash; Using <code>Ds\Stack</code></h2>
                        <div>
                            <p>Consuming the stack #1:</p>
                            <pre><code>while (!$stack->isEmpty()) {
    $element = $stack->pop();
}</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Consuming the stack #2:</p>
                            <pre><code>foreach ($stack as $element) {
    // do stuff with $element
}</code></pre>
                        </div>
                    </section>

                    <section>
                        <h2>Stack/Stack &mdash; benchmark</h2>
                        <h3>Using 10<sup>4</sup> arrays of 1000 elements</h3>
                        <div id="qs-memory" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart({
                                    chart: {
                                        type: 'bar',
                                        renderTo: 'qs-memory'
                                    },
                                    title: { text: 'Memory usage' },
                                    yAxis: {
                                        title: {
                                            enabled: false
                                        },
                                        labels: {
                                            enabled: false
                                        }
                                    },
                                    xAxis: { categories: ['PHP 5.6', 'PHP 7'] },
                                    plotOptions: {
                                        series: {
                                            dataLabels: {
                                                enabled: true,
                                                format: '{point.y} MiB'
                                            }
                                        }
                                    },
                                    legend: { reversed: true },
                                    series: [
                                        {
                                            name: 'Ds\\Queue / Ds\\Stack',
                                            data: [0, 158],
                                            tooltip: { valueSuffix: ' MiB' }
                                        },
                                        {
                                            name: 'SplQueue / SplStack',
                                            data: [920, 766],
                                            tooltip: { valueSuffix: ' MiB' }
                                        },
                                        {
                                            name: 'Array',
                                            data: [1378, 353],
                                            tooltip: { valueSuffix: ' MiB' }
                                        }
                                    ]
                                })
                            );
                        </script>
                    </section>
                    <section>
                        <h2>Queue/Stack &mdash; benchmark</h2>
                        <h3><strong>Creating</strong> 10<sup>4</sup> arrays of 1000 elements</h3>

                        <div id="qs-time-creation" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart({
                                    chart: {
                                        type: 'bar',
                                        renderTo: 'qs-time-creation'
                                    },
                                    title: { text: '# CPU instructions' },
                                    yAxis: {
                                        reversedStacks: false,
                                        min: 0,
                                        title: {
                                            enabled: false
                                        },
                                        labels: {
                                            enabled: false
                                        }
                                    },
                                    xAxis: { categories: ['PHP 7'] },
                                    plotOptions: {
                                        series: {
                                            dataLabels: {
                                                enabled: true,
                                                format: '{point.y} s'
                                            }
                                        }
                                    },
                                    series: [
                                        {
                                            name: 'Array',
                                            data: [6969682791],
                                            tooltip: { valueSuffix: ' s' }
                                        },
                                        {
                                            name: 'SplQueue / SplStack',
                                            data: [15969774454],
                                            tooltip: { valueSuffix: ' s' }
                                        },
                                        {
                                            name: 'Ds\\Queue / Ds\\Stack',
                                            data: [6697320610],
                                            tooltip: { valueSuffix: ' s' }
                                        }
                                    ]
                                })
                            );
                        </script>
                    </section>

                    <section>
                        <h2>Queue/Stack &mdash; benchmark</h2>
                        <h3><strong>Consuming</strong> 10<sup>4</sup> arrays of 1000 elements</h3>

                        <div id="qs-time-iterate" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart({
                                                         chart: {
                                                             type: 'bar',
                                                             renderTo: 'qs-time-iterate'
                                                         },
                                                         title: { text: '# CPU instructions' },
                                                         yAxis: {
                                                             reversedStacks: false,
                                                             min: 0,
                                                             title: {
                                                                 enabled: false
                                                             },
                                                             labels: {
                                                                 enabled: false
                                                             }
                                                         },
                                                         xAxis: { categories: ['PHP 7'] },
                                                         plotOptions: {
                                                             series: {
                                                                 dataLabels: {
                                                                     enabled: true,
                                                                     format: '{point.y} s'
                                                                 }
                                                             }
                                                         },
                                                         series: [
                                                             {
                                                                 name: 'Array',
                                                                 data: [134410902972],
                                                                 tooltip: { valueSuffix: ' s' }
                                                             },
                                                             {
                                                                 name: 'SplQueue / SplStack',
                                                                 data: [15682773467],
                                                                 tooltip: { valueSuffix: ' s' }
                                                             },
                                                             {
                                                                 name: 'Ds\\Queue / Ds\\Stack',
                                                                 data: [1499183982],
                                                                 tooltip: { valueSuffix: ' s' }
                                                             }
                                                         ]
                                                     })
                            );
                        </script>
                    </section>
                </section>

                <section class="sets">
                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets</h2>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets</h2>
                        <ul>
                            <li>A set is a collection with no particular ordering especially suited for testing the membership of a value against a collection or to perform union/intersection/complement operations between them</li>
                        </ul>
                        <img src="img/data-structures/venn.png" alt="Venn diagram" style="width: 40%;" />
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Using <code>array</code></h2>
                        <div class="code">
                            <div class="fragment">
                                <p>Creation:</p>
                                <pre><code>$set = [];</code></pre>
                            </div>
                            <div class="fragment">
                                <p>Add entries:</p>
                                <pre><code>$set[] = 1;
$set[] = 2;
$set[] = 3;</code></pre>
                            </div>
                            <div class="fragment">
                                <p>Checking presence:</p>
                                <pre><code>in_array(2, $set); // true
in_array(5, $set); // false</code></pre>
                            </div>
                            <div class="fragment">
                                <p>Other operations:</p>
                                <pre><code>array_merge($set1, $set2); // union
array_intersect($set1, $set2); // intersection
array_diff($set1, $set2); // complement</code></pre>
                            </div>
                            <div class="fragment performance killers">
                                <svg xmlns="http://www.w3.org/2000/svg">
                                    <line x1="0" y1="0" x2="960" y2="600" stroke-width="10" stroke="red" stroke-dasharray="25, 15"></line>
                                    <line x1="0" y1="600" x2="960" y2="0" stroke-width="10" stroke="red" stroke-dasharray="25, 15"></line>
                                </svg>
                                <strong>True performance killers!</strong>
                            </div>
                        </div>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Membership (mis-?)usages</h2>
                        <pre class="fragment"><code>if (in_array($httpStatus, [400, 401, 403, 404, 500]))
{
    // ...
}</code></pre>
                        <pre class="fragment"><code>if (
    $httpStatus === 400 || $httpStatus === 401 || $httpStatus === 403
    || $httpStatus === 404 || $httpStatus === 500
)
{
    // ...
}</code></pre>
                        <pre class="fragment"><code>switch ($httpStatus)
{
    case 400:
    case 401:
    case 403:
    case 404:
    case 500:
        // ...
}</code></pre>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Benchmarking mis-usages</h2>
                        <h3>5 * 10<sup>7</sup> membership test against set of 3 elements</h3>
                        <div id="set-mu-time" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart({
                                    chart: {
                                        type: 'bar',
                                        renderTo: 'set-mu-time'
                                    },
                                    title: { text: 'Speed' },
                                    yAxis: {
                                        title: {
                                            enabled: false
                                        },
                                        labels: {
                                            enabled: false
                                        }
                                    },
                                    xAxis: { categories: ['PHP 5.6', 'PHP 7'] },
                                    plotOptions: {
                                        series: {
                                            dataLabels: {
                                                enabled: true,
                                                format: '{point.y} s'
                                            }
                                        }
                                    },
                                    series: [
                                        {
                                            name: 'in_array',
                                            data: [19.59, 3.43],
                                            tooltip: { valueSuffix: ' s' }
                                        },
                                        {
                                            name: 'compare',
                                            data: [3.15, 2.34],
                                            tooltip: { valueSuffix: ' s' }
                                        },
                                        {
                                            name: 'switch',
                                            data: [5.2, 1.53],
                                            tooltip: { valueSuffix: ' s' }
                                        },
                                        {
                                            name: 'next slide way ;-)',
                                            data: [1.97, 0.75],
                                            tooltip: { valueSuffix: ' s' }
                                        }
                                    ]
                                })
                            );
                        </script>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Using array (simple types)</h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$set = [];</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre><code>$set[1] = true; // Any dummy value is good BUT NULL!
$set[2] = true;
$set[3] = true;</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Testing membership:</p>
                            <pre><code>isset($set[2]); // true
isset($set[5]); // false</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Other operations:</p>
                            <pre><code>$set1 + $set2; // union
array_intersect_key($set1, $set2); // intersection
array_diff_key($set1, $set2); // complement</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Using <code>SplObjectStorage</code></h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$set = new SplObjectStorage();</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$set-&gt;attach($object1);
$set-&gt;attach($object2);
$set-&gt;attach($object3);</code></pre>
                            <pre style="float: right;"><code>$set[$object1] = true;
$set[$object2] = true;
$set[$object3] = true;</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Testing membership:</p>
                            <pre><code>isset($set[$object2]); // true
isset($set[$object5]); // false</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Other operations:</p>
                            <pre><code>$set1-&gt;addAll($set2); // union
$set1-&gt;removeAllExcept($set2); // intersection
$set1-&gt;removeAll($set2); // complement</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Using <code>Ds\Set</code></h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$set = new Ds\Set();</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre style="float: left;"><code>$set[] = $data1;
$set[] = $data2;
$set[] = $data3;</code></pre>
                            <pre style="float: right;"><code>$set-&gt;add($data1);
$set-&gt;add($data2);
$set-&gt;add($data3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Testing membership:</p>
                            <pre><code>$set->contains($data1); // true
$set->contains($object5); // false</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Using bitsets</h2>
                        <pre><code>define("E_ERROR",   1);
define("E_WARNING", 2);
define("E_PARSE",   4);
define("E_NOTICE",  8);</code></pre>
                        <img class="fragment" src="img/data-structures/bitsets_0.png" alt="Error reporting bitsets"/>
                        <img class="fragment" src="img/data-structures/bitsets_1.png" alt="Error reporting bitsets"/>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Using bitsets</h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$set = 0;</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre><code>$set |= E_ERROR;
$set |= E_WARNING;
$set |= E_PARSE;</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Testing membership:</p>
                            <pre><code>$set &amp; E_ERROR; // true
$set &amp; E_NOTICE; // false</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Other operations:</p>
                            <pre><code>$set1 | $set2; // union
$set1 &amp; $set2; // intersection
$set1 ^ $set2; // complement</code></pre>
                        </div>
                    </section>

                    <section data-background="img/data-structures/sets.svg">
                        <h2>Sets &mdash; Using <code>QuickHash</code> (int)</h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$set = new QuickHashIntSet(64, QuickHashIntSet::CHECK_FOR_DUPES);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre><code>$set-&gt;add(1);
$set-&gt;add(2);
$set-&gt;add(3);</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Testing membership:</p>
                            <pre style="float: left"><code>$set-&gt;exists(2); // true
$set-&gt;exists(5); // false</code></pre>
                            <pre style="float: right"><code>isset($set[2]); // true
isset($set[5]); // false</code></pre>
                        </div>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Maps / Associative arrays</h2>
                        <p>A map is a collection of key/value pairs where all keys are unique.</p>
                    </section>

                    <section>
                        <h2>Maps</h2>
                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$map = [];</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre><code>$map["ONE"] = 1;
$map["TWO"] = 2;
$map["THREE"] = 3;</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Combining maps:</p>
                            <ul>
                                <li>
                                    the most <del>popular</del> <ins>sluggish</ins> way:
                                    <pre><code>array_merge($map1, $map2);</code></pre>
                                </li>
                                <li>
                                    the fast one:
                                    <pre><code>$map2 + $map1;</code></pre>
                                </li>
                            </ul>
                        </div>
                    </section>

                    <section>
                        <h2>Maps &mdash; benchmark</h2>
                        <h3>Performing 10<sup>7</sup> combination of 2 arrays of 5 elements</h3>
                        <div id="map-time" class="chart"></div>

                        <script>
                            allCharts.push(
                                new Highcharts.Chart({
                                    chart: {
                                        type: 'bar',
                                        renderTo: 'map-time'
                                    },
                                    title: { text: 'Speed' },
                                    yAxis: {
                                        reversedStacks: false,
                                        min: 0,
                                        title: {
                                            enabled: false
                                        },
                                        labels: {
                                            enabled: false
                                        }
                                    },
                                    xAxis: { categories: ['PHP 5.6', 'PHP 7'] },
                                    plotOptions: {
                                        series: {
                                            dataLabels: {
                                                enabled: true,
                                                format: '{point.y} s'
                                            }
                                        }
                                    },
                                    series: [
                                        {
                                            name: 'array_merge',
                                            data: [4.74, 1.42],
                                            tooltip: { valueSuffix: ' s' }
                                        },
                                        {
                                            name: '+ operator',
                                            data: [2.77, 1.09],
                                            tooltip: { valueSuffix: ' s' }
                                        }
                                    ]
                                })
                            );
                        </script>
                    </section>

                    <section>
                        <h2>Map using Ds\Map</h2>

                        <div class="fragment">
                            <p>Creation:</p>
                            <pre><code>$map = new Ds\Map;</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Add entries:</p>
                            <pre><code>$o1 = new stdclass;
$o2 = new stdclass;

$map[$o1] = $o2;</code></pre>
                            <p>Using the map:</p>
                            <pre><code>foreach ($map as $key => $element) {
    var_dump($key, $element);
}

object(stdClass)#5 (0) {
}
object(stdClass)#6 (0) {
}</code></pre>
                        </div>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Sparse dynamic arrays</h2>
                        <table class="sparse dynamic array">
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td class="x">X</td><td class="x">X</td><td class="x">X</td><td class="x">X</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="x">X</td><td class="x">X</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
                            </tr>
                        </table>
                    </section>

                    <section>
                        <h2>Sparse dynamic arrays &mdash; Using <code>Judy</code></h2>
                        <div class="fragment">
                            <p>Use a Judy array as you would use a regular PHP array:</p>
                            <pre><code>$sparseArray = new Judy(Judy::INT_TO_INT);

$sparseArray[125] = 17;
$sparseArray[312] = 18;
$sparseArray[859] = 25;

echo $sparseArray[125]; // will print 17
echo $sparseArray[42];  // will print 0</code></pre>
                        </div>
                        <div class="fragment">
                            <p>A memory-efficient bitset is also possible:</p>
                            <pre><code>$bitset = new Judy(Judy::BITSET);
$bitset[124] = true;

echo $bitset[124]; // will print 1
echo $bitset[100]; // will print 0

$bitset[124] = false; // is the same as unset($bitset[124])</code></pre>
                        </div>
                    </section>
                </section>

                <section class="conclusions">
                    <h2>Conclusions</h2>
                    <ul>
                        <li class="fragment">Use appropriate data structure. It will keep your code <strong>self-documenting and fast</strong>.</li>
                        <li class="fragment">Name your variables accordingly: use “Map”, “Set”, “List”, “Queue”,... to describe them instead of (always) naming it: <code>$array</code>.</li>
                    </ul>
                </section>

                <section class="questions">
                    <h2>Questions?</h2>
                </section>

                <section class="thanks">
                    <h2>Thanks</h2>
                    <p>Don't forget to rate this talk on <a itemprop="discussionUrl" href="https://joind.in/talk/035a8">https://joind.in/talk/035a8</a></p>

                    <h3>Stay in touch!</h3>
                    <p><a href="https://twitter.com/patrick_allaert/">@patrick_allaert</a></p>
                    <p><a href="mailto:patrickallaert@php.net">patrickallaert@php.net</a></p>
                </section>
            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

            var charts = document.getElementsByClassName("chart");
            for (var i = 0; i < charts.length; ++i) {
                charts[i].onclick = function () {
                    this.classList.toggle("modal");
                    for (var i = 0; i < allCharts.length; ++i) {
                        allCharts[i].reflow();
                    }
                    Reveal.configure();
                }
            }
        </script>

    </body>
</html>
